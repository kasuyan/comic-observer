(function(t){function e(e){for(var a,c,r=e[0],s=e[1],u=e[2],d=0,b=[];d<r.length;d++)c=r[d],Object.prototype.hasOwnProperty.call(i,c)&&i[c]&&b.push(i[c][0]),i[c]=0;for(a in s)Object.prototype.hasOwnProperty.call(s,a)&&(t[a]=s[a]);l&&l(e);while(b.length)b.shift()();return o.push.apply(o,u||[]),n()}function n(){for(var t,e=0;e<o.length;e++){for(var n=o[e],a=!0,r=1;r<n.length;r++){var s=n[r];0!==i[s]&&(a=!1)}a&&(o.splice(e--,1),t=c(c.s=n[0]))}return t}var a={},i={app:0},o=[];function c(e){if(a[e])return a[e].exports;var n=a[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,c),n.l=!0,n.exports}c.m=t,c.c=a,c.d=function(t,e,n){c.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},c.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},c.t=function(t,e){if(1&e&&(t=c(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)c.d(n,a,function(e){return t[e]}.bind(null,a));return n},c.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return c.d(e,"a",e),e},c.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},c.p="/comic-observer/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],s=r.push.bind(r);r.push=e,r=r.slice();for(var u=0;u<r.length;u++)e(r[u]);var l=s;o.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("cd49")},"034f":function(t,e,n){"use strict";var a=n("85ec"),i=n.n(a);i.a},"0cec":function(t,e,n){"use strict";var a=n("c932"),i=n.n(a);i.a},"1a50":function(t,e,n){},"3dfd":function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("Top",{attrs:{onClickEditShow:t.onClickEditShow,bookData:t.bookData,onSelectData:t.onSelectData}}),n("Detail",{attrs:{isShow:t.isEdit,currentData:t.currentData,onDeleteBook:t.onDeleteBook,onClickEditHide:t.onClickEditHide,saveBookData:t.saveBookData}}),n("Menu",{attrs:{onAddDataAndOpen:t.onAddDataAndOpen,onClickEditShow:t.onClickEditShow,isEdit:t.isEdit,onClickEditHide:t.onClickEditHide}})],1)},i=[],o=n("78c7"),c=o["a"],r=(n("034f"),n("2877"));n.d(e,"b",(function(){return o["b"]}));var s=Object(r["a"])(c,a,i,!1,null,null,null);e["a"]=s.exports},"53ca":function(t,e,n){t.exports=n.p+"img/bx-plus-circle.a5eb5de0.svg"},"542e":function(t,e,n){t.exports=n.p+"img/bx-sync.2b161a6d.svg"},6066:function(t,e,n){},"74dc":function(t,e,n){"use strict";var a=n("76e6"),i=n.n(a);i.a},"76e6":function(t,e,n){},"77bf":function(t,e,n){"use strict";var a=n("ebe0"),i=n.n(a);i.a},"78c7":function(t,e,n){"use strict";(function(t){n.d(e,"b",(function(){return v}));n("4de4"),n("a434");var a=n("d4ec"),i=n("bee2"),o=n("99de"),c=n("7e84"),r=n("262e"),s=n("9ab4"),u=n("60a3"),l=n("aa69"),d=n("9655"),b=n("8860"),h=n("a002"),p=n.n(h),v=t.eventHub=new u["c"];p.a.config({driver:p.a.INDEXEDDB,name:"comicObserver",version:1,storeName:"bookDB",description:"set book data"});var f=function(t){function e(){var t;return Object(a["a"])(this,e),t=Object(o["a"])(this,Object(c["a"])(e).apply(this,arguments)),t.isEdit=!1,t.currentData={},t.bookData=[],t}return Object(r["a"])(e,t),Object(i["a"])(e,[{key:"created",value:function(){var t=this;p.a.getItem("CDDB").then((function(e){e&&e.length?t.bookData=e:(t.bookData=[],t.onAddData())}))}},{key:"saveBookData",value:function(){p.a.setItem("CDDB",this.bookData)}},{key:"onClickEditShow",value:function(){document.body.className="edit",this.isEdit=!0}},{key:"onClickEditHide",value:function(){document.body.className="",this.isEdit=!1}},{key:"onSelectData",value:function(t){this.currentData=this.bookData[t],this.onClickEditShow()}},{key:"onAddData",value:function(){this.bookData.unshift({isbn:Date.now(),name:"未設定タイトル",vol:0,description:"説明文",updata:!1,image:""}),this.saveBookData()}},{key:"onAddDataAndOpen",value:function(){this.onAddData(),this.onSelectData(0)}},{key:"onDeleteBook",value:function(t){var e=0;this.bookData.filter((function(n,a){n.isbn===t&&(e=a)}));this.bookData.splice(e,1),this.saveBookData()}}]),e}(u["c"]);f=s["a"]([Object(u["a"])({components:{Top:l["a"],Detail:d["a"],Menu:b["a"]}})],f),e["a"]=f}).call(this,n("c8ba"))},"7e65":function(t,e,n){},"85ec":function(t,e,n){},8860:function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"menu",class:{open:t.isOpen}},[n("button",{staticClass:"menu-button",on:{click:t.onToggleMenu}},[n("IconMenu",{directives:[{name:"show",rawName:"v-show",value:!t.isEdit,expression:"!isEdit"}],attrs:{width:"42",height:"42"}}),n("IconBack",{directives:[{name:"show",rawName:"v-show",value:t.isEdit,expression:"isEdit"}],attrs:{width:"42",height:"42"}})],1),n("div",{staticClass:"menu-button sub top",class:[t.isOpen?"open":"close"],on:{click:t.onClickEditOpen}},[n("IconPlus",{attrs:{width:"32",height:"32"}})],1),n("div",{staticClass:"menu-button sub top-right",class:[t.isOpen?"open":"close"]},[n("IconSync",{attrs:{width:"32",height:"32"}})],1),n("div",{staticClass:"menu-button sub right",class:[t.isOpen?"open":"close"]},[n("IconSetting",{attrs:{width:"32",height:"32"}})],1)])},i=[],o=n("d4ec"),c=n("bee2"),r=n("99de"),s=n("7e84"),u=n("262e"),l=n("9ab4"),d=n("60a3"),b=n("3dfd"),h=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("img",{attrs:{src:n("bef5"),width:t.width,height:t.height}})},p=[],v=function(t){function e(){return Object(o["a"])(this,e),Object(r["a"])(this,Object(s["a"])(e).apply(this,arguments))}return Object(u["a"])(e,t),e}(d["c"]);l["a"]([Object(d["b"])({default:"24"})],v.prototype,"width",void 0),l["a"]([Object(d["b"])({default:"24"})],v.prototype,"height",void 0),v=l["a"]([d["a"]],v);var f=v,O=f,j=n("2877"),m=Object(j["a"])(O,h,p,!1,null,null,null),k=m.exports,g=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("img",{attrs:{src:n("917f"),width:t.width,height:t.height}})},y=[],D=function(t){function e(){return Object(o["a"])(this,e),Object(r["a"])(this,Object(s["a"])(e).apply(this,arguments))}return Object(u["a"])(e,t),e}(d["c"]);l["a"]([Object(d["b"])({default:"24"})],D.prototype,"width",void 0),l["a"]([Object(d["b"])({default:"24"})],D.prototype,"height",void 0),D=l["a"]([d["a"]],D);var w=D,E=w,S=Object(j["a"])(E,g,y,!1,null,null,null),_=S.exports,C=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("img",{attrs:{src:n("53ca"),width:t.width,height:t.height}})},x=[],B=function(t){function e(){return Object(o["a"])(this,e),Object(r["a"])(this,Object(s["a"])(e).apply(this,arguments))}return Object(u["a"])(e,t),e}(d["c"]);l["a"]([Object(d["b"])({default:"24"})],B.prototype,"width",void 0),l["a"]([Object(d["b"])({default:"24"})],B.prototype,"height",void 0),B=l["a"]([d["a"]],B);var I=B,A=I,$=Object(j["a"])(A,C,x,!1,null,null,null),R=$.exports,M=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("img",{attrs:{src:n("e471"),width:t.width,height:t.height}})},N=[],H=function(t){function e(){return Object(o["a"])(this,e),Object(r["a"])(this,Object(s["a"])(e).apply(this,arguments))}return Object(u["a"])(e,t),e}(d["c"]);l["a"]([Object(d["b"])({default:"24"})],H.prototype,"width",void 0),l["a"]([Object(d["b"])({default:"24"})],H.prototype,"height",void 0),H=l["a"]([d["a"]],H);var P=H,T=P,L=Object(j["a"])(T,M,N,!1,null,null,null),F=L.exports,J=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("img",{attrs:{src:n("542e"),width:t.width,height:t.height}})},V=[],W=function(t){function e(){return Object(o["a"])(this,e),Object(r["a"])(this,Object(s["a"])(e).apply(this,arguments))}return Object(u["a"])(e,t),e}(d["c"]);l["a"]([Object(d["b"])({default:"24"})],W.prototype,"width",void 0),l["a"]([Object(d["b"])({default:"24"})],W.prototype,"height",void 0),W=l["a"]([d["a"]],W);var G=W,X=G,q=Object(j["a"])(X,J,V,!1,null,null,null),z=q.exports,K=function(t){function e(){var t;return Object(o["a"])(this,e),t=Object(r["a"])(this,Object(s["a"])(e).apply(this,arguments)),t.isOpen=!1,t}return Object(u["a"])(e,t),Object(c["a"])(e,[{key:"onToggleMenu",value:function(){this.isOpen=!this.isOpen,this.isEdit&&(this.onClickMenuClose(),this.onClickEditHide(),b["b"].$emit("stopScan"))}},{key:"onClickMenuOpen",value:function(){this.isOpen=!0}},{key:"onClickMenuClose",value:function(){this.isOpen=!1}},{key:"onClickEditOpen",value:function(){this.onAddDataAndOpen(),this.onClickMenuClose(),this.onClickEditShow()}}]),e}(d["c"]);l["a"]([Object(d["b"])()],K.prototype,"onClickEditShow",void 0),l["a"]([Object(d["b"])()],K.prototype,"onClickEditHide",void 0),l["a"]([Object(d["b"])()],K.prototype,"onAddDataAndOpen",void 0),l["a"]([Object(d["b"])()],K.prototype,"isEdit",void 0),K=l["a"]([Object(d["a"])({components:{IconMenu:k,IconBack:_,IconPlus:R,IconSetting:F,IconSync:z}})],K);var Q=K,U=Q,Y=(n("74dc"),Object(j["a"])(U,a,i,!1,null,"000e8dc5",null));e["a"]=Y.exports},"8f8a":function(t,e,n){"use strict";var a=n("937a"),i=n.n(a);i.a},"917f":function(t,e,n){t.exports=n.p+"img/bx-arrow-back.91f4ca63.svg"},"937a":function(t,e,n){},9655:function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"detail-page",class:{"is-show":t.isShow}},[n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.currentData.name,expression:"currentData.name"}],staticClass:"title",domProps:{value:t.currentData.name},on:{input:function(e){e.target.composing||t.$set(t.currentData,"name",e.target.value)}}}),t._v(" "),n("div",{staticClass:"col2"},[n("BookImage",{attrs:{src:t.currentData.image,width:140,height:190,alt:t.currentData.name}}),n("dl",{staticClass:"info"},[n("dt",[t._v("あらすじ")]),n("dd",[t._v(t._s(t.currentData.description))]),n("dt",[t._v("ISBN")]),n("dd",[n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.currentData.isbn,expression:"currentData.isbn"}],staticClass:"isbn",domProps:{value:t.currentData.isbn},on:{input:function(e){e.target.composing||t.$set(t.currentData,"isbn",e.target.value)}}})])])],1),n("Button",{on:{onClick:t.onBookSave}},[t._v("保存")]),n("Button",{on:{onClick:t.onSync}},[t._v("入力データから登録")]),n("Button",{on:{onClick:t.onScan}},[t._v("バーコードから登録")]),n("Button",{attrs:{isDelete:!0},on:{onClick:t.onDelete}},[t._v("マンガの削除")]),n("div",{directives:[{name:"show",rawName:"v-show",value:t.isScaning,expression:"isScaning"}],staticClass:"scan-view"},[n("video",{attrs:{id:"video"}}),n("span",{staticClass:"red-line"}),t._m(0)])],1)},i=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("p",[t._v(" バーコードは978 "),n("b",[t._v("4")]),t._v("で始まるものを読み取ってください ")])}],o=(n("a4d3"),n("e01a"),n("b0c0"),n("a9e3"),n("d3b7"),n("96cf"),n("1da1")),c=n("d4ec"),r=n("bee2"),s=n("99de"),u=n("7e84"),l=n("262e"),d=n("9ab4"),b=n("60a3"),h=n("bc3a"),p=n.n(h),v=n("e588"),f=n("3dfd"),O=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("button",{class:{alert:t.isDelete},on:{click:t.clickHandler}},[t._t("default")],2)},j=[],m=function(t){function e(){return Object(c["a"])(this,e),Object(s["a"])(this,Object(u["a"])(e).apply(this,arguments))}return Object(l["a"])(e,t),Object(r["a"])(e,[{key:"clickHandler",value:function(){this.$emit("onClick")}}]),e}(b["c"]);d["a"]([Object(b["b"])()],m.prototype,"isDelete",void 0),m=d["a"]([b["a"]],m);var k=m,g=k,y=(n("a12c"),n("2877")),D=Object(y["a"])(g,O,j,!1,null,"727e101e",null),w=D.exports,E=n("ed06"),S=function(t){function e(){var t;return Object(c["a"])(this,e),t=Object(s["a"])(this,Object(u["a"])(e).apply(this,arguments)),t.title="hoge",t.isbn=0,t.image="",t.READER=null,t.errorId=0,t.isScaning=!1,t.isLoading=!1,t}return Object(l["a"])(e,t),Object(r["a"])(e,[{key:"created",value:function(){f["b"].$on("stopScan",this.onStopScan)}},{key:"onBookSave",value:function(){this.saveBookData()}},{key:"onSync",value:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.getBookInfo(this.currentData.isbn);case 2:this.onBookSave();case 3:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"onStopScan",value:function(){this.READER&&this.READER.reset(),this.saveBookData(),this.isScaning=!1}},{key:"onDelete",value:function(){window.confirm("delete this comic ?")&&(this.onDeleteBook(this.currentData.isbn),this.onClickEditHide(),this.onStopScan())}},{key:"onScan",value:function(){var t=this;this.READER=new v["BrowserMultiFormatReader"],this.isScaning=!0,this.READER.getVideoInputDevices().then((function(e){var n=1===e.length?0:e.length-1,a=e[n].deviceId;t.READER.decodeFromVideoDevice(a,"video",(function(e,n){e&&t.errorId!==Number(e.text)&&t.getBookInfo(Number(e))}))}))}},{key:"getBookInfo",value:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(e){var n=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!this.isLoading){t.next=2;break}return t.abrupt("return");case 2:this.isLoading=!0,p.a.get("https://api.openbd.jp/v1/get?isbn=".concat(e)).then((function(t){if(t.data[0]){var a=t.data[0];n.currentData.name=a.summary.title,n.currentData.isbn=a.summary.isbn,n.currentData.description=a.onix.CollateralDetail.TextContent[0].Text,n.currentData.image="https://iss.ndl.go.jp/thumbnail/".concat(e)}})).catch((function(t){n.errorId=e})).finally((function(){n.isLoading=!1,n.onStopScan()}));case 4:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()}]),e}(b["c"]);d["a"]([Object(b["b"])()],S.prototype,"currentData",void 0),d["a"]([Object(b["b"])()],S.prototype,"isShow",void 0),d["a"]([Object(b["b"])()],S.prototype,"onDeleteBook",void 0),d["a"]([Object(b["b"])()],S.prototype,"onClickEditHide",void 0),d["a"]([Object(b["b"])()],S.prototype,"saveBookData",void 0),S=d["a"]([Object(b["a"])({components:{Button:w,BookImage:E["a"]}})],S);var _=S,C=_,x=(n("8f8a"),Object(y["a"])(C,a,i,!1,null,"4874fb50",null));e["a"]=x.exports},a12c:function(t,e,n){"use strict";var a=n("1a50"),i=n.n(a);i.a},aa69:function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("BookList",{attrs:{bookData:t.bookData,onSelectData:t.onSelectData}})],1)},i=[],o=n("d4ec"),c=n("99de"),r=n("7e84"),s=n("262e"),u=n("9ab4"),l=n("60a3"),d=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("ul",t._l(t.bookData,(function(e,a){return n("BookListItem",{key:e.isbn,attrs:{data:e,index:a,onSelectData:t.onSelectData}})})),1)])},b=[],h=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("li",{on:{click:t.onClick}},[n("BookImage",{attrs:{src:t.data.image,width:80,height:108,alt:t.data.name}}),n("h2",[t._v(t._s(t.data.name))])],1)},p=[],v=n("bee2"),f=n("ed06"),O=function(t){function e(){return Object(o["a"])(this,e),Object(c["a"])(this,Object(r["a"])(e).apply(this,arguments))}return Object(s["a"])(e,t),Object(v["a"])(e,[{key:"onClick",value:function(){this.onSelectData(this.index)}}]),e}(l["c"]);u["a"]([Object(l["b"])()],O.prototype,"data",void 0),u["a"]([Object(l["b"])()],O.prototype,"index",void 0),u["a"]([Object(l["b"])()],O.prototype,"onSelectData",void 0),O=u["a"]([Object(l["a"])({components:{BookImage:f["a"]}})],O);var j=O,m=j,k=(n("ea4d"),n("2877")),g=Object(k["a"])(m,h,p,!1,null,"61358878",null),y=g.exports,D=function(t){function e(){return Object(o["a"])(this,e),Object(c["a"])(this,Object(r["a"])(e).apply(this,arguments))}return Object(s["a"])(e,t),e}(l["c"]);u["a"]([Object(l["b"])()],D.prototype,"bookData",void 0),u["a"]([Object(l["b"])()],D.prototype,"msg",void 0),u["a"]([Object(l["b"])()],D.prototype,"onSelectData",void 0),D=u["a"]([Object(l["a"])({components:{BookListItem:y}})],D);var w=D,E=w,S=(n("0cec"),Object(k["a"])(E,d,b,!1,null,"693aef6e",null)),_=S.exports,C=function(t){function e(){return Object(o["a"])(this,e),Object(c["a"])(this,Object(r["a"])(e).apply(this,arguments))}return Object(s["a"])(e,t),e}(l["c"]);u["a"]([Object(l["b"])()],C.prototype,"bookData",void 0),u["a"]([Object(l["b"])()],C.prototype,"onSelectData",void 0),C=u["a"]([Object(l["a"])({components:{BookList:_}})],C);var x=C,B=x,I=(n("77bf"),Object(k["a"])(B,a,i,!1,null,"3bcd680b",null));e["a"]=I.exports},bd0f:function(t,e,n){"use strict";var a=n("6066"),i=n.n(a);i.a},bef5:function(t,e,n){t.exports=n.p+"img/bx-menu.6ddac137.svg"},c932:function(t,e,n){},cd49:function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var a=n("2b0e"),i=n("3dfd");if(a["a"].config.productionTip=!1,new a["a"]({render:function(t){return t(i["a"])}}).$mount("#app"),"serviceWorker"in navigator){var o="/comic-observer/",c=o+"sw.js";navigator.serviceWorker.register(c).catch((function(){}))}},e471:function(t,e,n){t.exports=n.p+"img/bx-cog.1dca7343.svg"},ea4d:function(t,e,n){"use strict";var a=n("7e65"),i=n.n(a);i.a},ebe0:function(t,e,n){},ed06:function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{style:{width:t.width+"px",height:t.height+"px"}},[t.src?n("img",{attrs:{src:t.src,alt:t.alt},on:{error:t.resetSrc}}):n("div",{staticClass:"no-image"},[t._v("NO IMAGE")])])},i=[],o=n("d4ec"),c=n("bee2"),r=n("99de"),s=n("7e84"),u=n("262e"),l=n("9ab4"),d=n("60a3"),b=function(t){function e(){return Object(o["a"])(this,e),Object(r["a"])(this,Object(s["a"])(e).apply(this,arguments))}return Object(u["a"])(e,t),Object(c["a"])(e,[{key:"resetSrc",value:function(){this.src=""}}]),e}(d["c"]);l["a"]([Object(d["b"])()],b.prototype,"src",void 0),l["a"]([Object(d["b"])()],b.prototype,"width",void 0),l["a"]([Object(d["b"])()],b.prototype,"height",void 0),l["a"]([Object(d["b"])()],b.prototype,"alt",void 0),b=l["a"]([d["a"]],b);var h=b,p=h,v=(n("bd0f"),n("2877")),f=Object(v["a"])(p,a,i,!1,null,"63200602",null);e["a"]=f.exports}});
//# sourceMappingURL=app.22e87818.js.map